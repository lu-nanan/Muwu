if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((o=>t.resolve(e()).then((()=>o))),(o=>t.resolve(e()).then((()=>{throw o}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...o){uni.__log__?uni.__log__(e,t,...o):console[e].apply(console,[...o,t])}function o(e,t){return"string"==typeof e?t:e}const a=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}],s=(e,t)=>{const o=e.__vccOpts||e;for(const[a,s]of t)o[a]=s;return o};const i=s({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:a}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,o,a,s,i,l){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle(l.styleObj),class:e.normalizeClass(["uni-icons",["uniui-"+a.type,a.customPrefix,a.customPrefix?a.type:""]]),onClick:o[0]||(o[0]=(...e)=>l._onClick&&l._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-5610c8db"]]),l="/static/login3.png";const n=s({data:()=>({remeberOrNot:!1,account:"",password:"",urls:getApp().globalData.url}),methods:{goVcLogin(){uni.navigateTo({url:"/pages/Login/vcLogin"})},goRegister(){uni.navigateTo({url:"/pages/Register/Register"})},handleChange(){this.remeberOrNot=!this.remeberOrNot,uni.setStorageSync("rememberme",this.remeberOrNot),t("log","at pages/Login/apLogin.vue:65",this.remeberOrNot)},show(){t("log","at pages/Login/apLogin.vue:68",this.account,this.password)},onload(){this.rememberOrNot=uni.getStorageSync("rememberme"),rememberOrNot&&(this.account=uni.getStorageSync("account"),this.password=uni.getStorageSync("password"))},async checkPassword(){if(!this.account.trim())return void uni.showToast({title:"请输入账号",icon:"none"});if(!this.password.trim())return void uni.showToast({title:"请输入密码",icon:"none"});const e=this.urls+"/auth/login",o={account:this.account,password:this.password};try{uni.showToast({title:"加载中...",icon:"loading",duration:3e4,mask:!0});const t=await uni.request({url:e,method:"POST",data:o,header:{"Content-Type":"application/json"}});if("登录成功"===t.data.message){uni.hideToast(),uni.showToast({title:"登录成功",icon:"success"});getApp().globalData.userInfo={id:t.data.userId},uni.reLaunch({url:"/pages/index/index"})}else uni.showToast({title:"账号或密码错误",icon:"error"})}catch(a){uni.showToast({title:"网络请求失败",icon:"none"}),t("error","at pages/Login/apLogin.vue:146",a)}}}},[["render",function(t,a,s,n,c,r){const d=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"login-container"},[e.createElementVNode("image",{class:"background-image",src:l,mode:"heightFix"}),e.createElementVNode("view",{class:"login-box"},[e.createElementVNode("view",{class:"login-textbox"},[e.createElementVNode("text",{class:"login-title"},"登录"),e.createElementVNode("text",{class:"y-text",onClick:a[0]||(a[0]=e=>r.goVcLogin())},"验证码登录")]),e.createElementVNode("view",{class:"input-groups"},[e.createElementVNode("view",{class:"input-group"},[e.createVNode(d,{type:"person",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{class:"login-input","onUpdate:modelValue":a[1]||(a[1]=e=>c.account=e),placeholder:"账号/手机号/邮箱"},null,512),[[e.vModelText,c.account]])]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(d,{type:"locked",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{class:"login-input",type:"password","onUpdate:modelValue":a[2]||(a[2]=e=>c.password=e),placeholder:"登录密码"},null,512),[[e.vModelText,c.password]])]),e.createElementVNode("view",{class:"remeberme"},[e.createElementVNode("checkbox-group",{name:"",onChange:a[3]||(a[3]=e=>r.handleChange())},[e.createElementVNode("checkbox",{value:"checkbox1",style:e.normalizeStyle({transform:"scale(0.6)"})},null,4)],32),e.createElementVNode("text",{class:"z-text"},"记住我"),e.createElementVNode("text",{class:"w-text"},"忘记密码")]),e.createElementVNode("button",{class:"login-button",onClick:a[4]||(a[4]=e=>r.checkPassword())},"登录"),e.createElementVNode("view",{class:"to-register"},[e.createElementVNode("text",{class:"rn-text"},"没有账号？"),e.createElementVNode("text",{class:"r-text",onClick:a[5]||(a[5]=e=>r.goRegister())}," 点此注册")])])])])}]]),c=["{","}"];const r=/^(?:\d)+/,d=/^(?:\w)+/;const u="zh-Hans",p="zh-Hant",h="en",g=Object.prototype.hasOwnProperty,f=(e,t)=>g.call(e,t),m=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,o=c){if(!t)return[e];let a=this._caches[e];return a||(a=function(e,[t,o]){const a=[];let s=0,i="";for(;s<e.length;){let l=e[s++];if(l===t){i&&a.push({type:"text",value:i}),i="";let t="";for(l=e[s++];void 0!==l&&l!==o;)t+=l,l=e[s++];const n=l===o,c=r.test(t)?"list":n&&d.test(t)?"named":"unknown";a.push({value:t,type:c})}else i+=l}return i&&a.push({type:"text",value:i}),a}(e,o),this._caches[e]=a),function(e,t){const o=[];let a=0;const s=Array.isArray(t)?"list":(i=t,null!==i&&"object"==typeof i?"named":"unknown");var i;if("unknown"===s)return o;for(;a<e.length;){const i=e[a];switch(i.type){case"text":o.push(i.value);break;case"list":o.push(t[parseInt(i.value,10)]);break;case"named":"named"===s&&o.push(t[i.value])}a++}return o}(a,t)}};function v(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return u;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?u:e.indexOf("-hant")>-1?p:(o=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==o.indexOf(e)))?p:u);var o;let a=[h,"fr","es"];t&&Object.keys(t).length>0&&(a=Object.keys(t));const s=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,a);return s||void 0}class w{constructor({locale:e,fallbackLocale:t,messages:o,watcher:a,formater:s}){this.locale=h,this.fallbackLocale=h,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=s||m,this.messages=o||{},this.setLocale(e||h),a&&this.watchLocale(a)}setLocale(e){const t=this.locale;this.locale=v(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,o=!0){const a=this.messages[e];a?o?Object.assign(a,t):Object.keys(t).forEach((e=>{f(a,e)||(a[e]=t[e])})):this.messages[e]=t}f(e,t,o){return this.formater.interpolate(e,t,o).join("")}t(e,t,o){let a=this.message;return"string"==typeof t?(t=v(t,this.messages))&&(a=this.messages[t]):o=t,f(a,e)?this.formater.interpolate(a[e],o).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}const y={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:x}=function(e,t={},o,a){if("string"!=typeof e){const o=[t,e];e=o[0],t=o[1]}"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():h),"string"!=typeof o&&(o="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||h);const s=new w({locale:e,fallbackLocale:o,messages:t,watcher:a});let i=(e,t)=>{if("function"!=typeof getApp)i=function(e,t){return s.t(e,t)};else{let e=!1;i=function(t,o){const a=getApp().$vm;return a&&(a.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(a,s))),s.t(t,o)}}return i(e,t)};return{i18n:s,f:(e,t,o)=>s.f(e,t,o),t:(e,t)=>i(e,t),add:(e,t,o=!0)=>s.add(e,t,o),watch:e=>s.watchLocale(e),getLocale:()=>s.getLocale(),setLocale:e=>s.setLocale(e)}}(y);const b=s({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},textColor:{type:String,default:"#000000"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||x("uni-search-bar.cancel")},placeholderText(){return this.placeholder||x("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.searchVal="",this.$nextTick((()=>{this.$emit("clear",{value:""})}))},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,plus.key.hideSoftKeybord())},confirm(){plus.key.hideSoftKeybord(),this.$emit("confirm",{value:this.searchVal})},blur(){plus.key.hideSoftKeybord(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(t,a,s,l,n,c){const r=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"uni-searchbar"},[e.createElementVNode("view",{style:e.normalizeStyle({borderRadius:s.radius+"px",backgroundColor:s.bgColor}),class:"uni-searchbar__box",onClick:a[5]||(a[5]=(...e)=>c.searchClick&&c.searchClick(...e))},[e.createElementVNode("view",{class:"uni-searchbar__box-icon-search"},[e.renderSlot(t.$slots,"searchIcon",{},(()=>[e.createVNode(r,{color:"#c0c4cc",size:"18",type:"search"})]),!0)]),n.show||n.searchVal?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,focus:n.showSync,disabled:s.readonly,placeholder:c.placeholderText,maxlength:s.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>n.searchVal=e),style:e.normalizeStyle({color:s.textColor}),onConfirm:a[1]||(a[1]=(...e)=>c.confirm&&c.confirm(...e)),onBlur:a[2]||(a[2]=(...e)=>c.blur&&c.blur(...e)),onFocus:a[3]||(a[3]=(...e)=>c.emitFocus&&c.emitFocus(...e))},null,44,["focus","disabled","placeholder","maxlength"])),[[e.vModelText,n.searchVal]]):(e.openBlock(),e.createElementBlock("text",{key:1,class:"uni-searchbar__text-placeholder"},e.toDisplayString(s.placeholder),1)),n.show&&("always"===s.clearButton||"auto"===s.clearButton&&""!==n.searchVal)&&!s.readonly?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-searchbar__box-icon-clear",onClick:a[4]||(a[4]=(...e)=>c.clear&&c.clear(...e))},[e.renderSlot(t.$slots,"clearIcon",{},(()=>[e.createVNode(r,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])):e.createCommentVNode("",!0)],4),"always"===s.cancelButton||n.show&&"auto"===s.cancelButton?(e.openBlock(),e.createElementBlock("text",{key:0,onClick:a[6]||(a[6]=(...e)=>c.cancel&&c.cancel(...e)),class:"uni-searchbar__cancel"},e.toDisplayString(c.cancelTextI18n),1)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-2ba324d9"]]);const V=s({data:()=>({sortOptions:["默认排序","最近使用","最久未用","从大到小","从小到大"],currentSort:"默认排序",fileOptions:["所有文件","图片","文件","文件夹","视频","音频"],currentFile:"所有文件",isBatchMode:!1}),methods:{handleSortChange(e){this.currentSort=this.sortOptions[e.detail.value],uni.$emit("sortedEvent",e)},handleFileChange(e){this.currentFile=this.fileOptions[e.detail.value]},toggleBatchMode(){this.isBatchMode=!this.isBatchMode,uni.$emit("toggleBatchModes",this.isBatchMode)}}},[["render",function(t,o,a,s,i,l){return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"custom-navbar"},[e.createElementVNode("picker",{mode:"selector",range:i.sortOptions,onChange:o[0]||(o[0]=(...e)=>l.handleSortChange&&l.handleSortChange(...e)),class:"nav-item"},[e.createElementVNode("view",{class:"nav-item-text"},e.toDisplayString(i.currentSort),1)],40,["range"]),e.createElementVNode("picker",{mode:"selector",range:i.fileOptions,onChange:o[1]||(o[1]=(...e)=>l.handleFileChange&&l.handleFileChange(...e)),class:"nav-item"},[e.createElementVNode("view",{class:"nav-item-text"},e.toDisplayString(i.currentFile),1)],40,["range"]),e.createElementVNode("view",{class:"nav-item",onClick:o[2]||(o[2]=(...e)=>l.toggleBatchMode&&l.toggleBatchMode(...e))},[e.createElementVNode("text",{class:e.normalizeClass(["nav-item-text",{"batch-active":i.isBatchMode}])},e.toDisplayString(i.isBatchMode?"完成":"批量操作"),3)])])])}],["__scopeId","data-v-f8db5c88"]]);const _=s({data:()=>({}),methods:{search(e){uni.showToast({title:"搜索："+e.value,icon:"none"})},blur(e){uni.showToast({title:"blur事件，输入值为："+e.value,icon:"none"})},focus(e){uni.showToast({title:"focus事件，输出值为："+e.value,icon:"none"})},change(e){t("log","at components/mySearchInput.vue:34","e:",e)}}},[["render",function(t,a,s,i,l,n){const c=o(e.resolveDynamicComponent("uni-search-bar"),b);return e.openBlock(),e.createElementBlock("view",null,[e.createVNode(c,{class:"searchbar",onConfirm:n.search,focus:!1,onBlur:n.blur,onFocus:n.focus,placeholder:"请输入文字"},null,8,["onConfirm","onBlur","onFocus"])])}],["__scopeId","data-v-d4263468"]]);const T=s({props:{files:{type:Array,default:()=>[]}},data:()=>({isBatchModes:!1,sortedFiles:[]}),components:{cloudFileListItem:s({props:["file"],data:()=>({})},[["render",function(t,a,s,l,n,c){const r=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"file-item"},[e.createElementVNode("view",{class:"file-icon"},[e.createVNode(r,{type:"folder-add",size:"30"})]),e.createElementVNode("view",{class:"file-divider"}),e.createElementVNode("view",{class:"file-info"},[e.createElementVNode("view",{class:"file-nametag"},[e.createElementVNode("text",{class:"file-name"},e.toDisplayString(s.file.name),1),e.createElementVNode("view",{class:"file-tag"},e.toDisplayString(s.file.tag?s.file.tag:"文件夹"),1)]),e.createElementVNode("view",{class:"file-datesize"},[e.createElementVNode("text",{class:"file-date"},e.toDisplayString(s.file.date),1),e.createElementVNode("text",{class:"file-size"},e.toDisplayString(s.file.size),1)])])])}],["__scopeId","data-v-195f646e"]])},watch:{files(e,t){this.sortedFiles=e}},created(){uni.$on("sortedEvent",function(e){t("log","at components/cloudFileList.vue:45","aminoac:   "+e.detail.value),3===e.detail.value&&(this.sortedFiles=[...this.files].sort(((e,t)=>void 0===t.size&&void 0!==e.size?-1:void 0===e.size&&void 0!==t.size?1:void 0===t.size&&void 0===e.size?0:t.trueSize-e.trueSize))),4===e.detail.value&&(this.sortedFiles=[...this.files].sort(((e,t)=>void 0===e.size&&void 0!==t.size?1:void 0===t.size&&void 0!==e.size?-1:void 0===e.size&&void 0===t.size?0:e.trueSize-t.trueSize)),t("log","at components/cloudFileList.vue:69","升序排序后的数组:",JSON.stringify(this.sortedFiles,null,2)))}.bind(this)),uni.$on("toggleBatchModes",function(e){if(t("log","at components/cloudFileList.vue:73","监听到事件，携带参数为："+e),!0===this.isBatchModes&&!1===e){const e=this.files.filter((function(e){return e.selected}));for(let o=0;o<e.length;o++)t("log","at components/cloudFileList.vue:82",e[o].name);for(let t=0;t<this.files.length;t++)this.files[t].selected=!1}this.isBatchModes=e}.bind(this))},methods:{selected(e){if(uni.$emit("jump",e),!0===this.isBatchModes)for(let t=0;t<this.files.length;t++)if(this.files[t].name===name){this.files[t].selected=!this.files[t].selected;break}for(let o=0;o<this.files.length;o++)if(this.files[o].name===name){t("log","at components/cloudFileList.vue:107",this.files[o].name,this.files[o].selected);break}}}},[["render",function(t,o,a,s,i,l){const n=e.resolveComponent("cloudFileListItem");return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"file-list-container"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"file-scroll-view"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.sortedFiles,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a},[e.createElementVNode("view",{class:e.normalizeClass({"file-item-container":t.selected&&i.isBatchModes}),onClick:e=>l.selected(t),onLongpress:o[0]||(o[0]=()=>{})},[e.createVNode(n,{class:"file-item",file:t},null,8,["file"])],42,["onClick"])])))),128))])])])}],["__scopeId","data-v-5c2a1476"]]);const N=s({props:{isShow:{type:Boolean,default:!1},qrcodeUrl:{type:String,required:!0},tipText:{type:String,default:"长按保存二维码"}},methods:{closeModal(){this.$emit("close")}}},[["render",function(t,o,a,s,i,l){return e.withDirectives((e.openBlock(),e.createElementBlock("view",{class:"qrcode-modal"},[e.createElementVNode("view",{class:"mask",onClick:o[0]||(o[0]=(...e)=>l.closeModal&&l.closeModal(...e))}),e.createElementVNode("view",{class:"modal-content"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"title"},"二维码信息"),e.createElementVNode("text",{class:"close-btn",onClick:o[1]||(o[1]=e=>l.closeModal())},"×")]),e.createElementVNode("view",{class:"qrcode-container"},[e.createElementVNode("image",{src:a.qrcodeUrl,mode:"widthFix",class:"qrcode-image","placeholder-class":"qrcode-placeholder"},null,8,["src"])]),a.tipText?(e.openBlock(),e.createElementBlock("text",{key:0,class:"tip"},e.toDisplayString(a.tipText),1)):e.createCommentVNode("",!0)])],512)),[[e.vShow,a.isShow]])}],["__scopeId","data-v-9c2f9ad8"]]);const E=s({data:()=>({id:getApp().globalData.userInfo.id,path:getApp().globalData.userInfo.id,files:[],isModalShow:!1,qrcodeUrl:"",qrTip:"扫描二维码登录",urls:getApp().globalData.url}),created(){uni.$on("jump",function(e){".."===e.name?this.path!=this.id?this.path=this.path.slice(0,this.path.lastIndexOf("/")):uni.showToast({title:"根目录不能再往上了"}):this.path=this.path+"/"+e.name,"文件夹"===e.type?(uni.showToast({title:"加载中...",icon:"loading",duration:3e4,mask:!0}),uni.request({url:this.urls+"/file/list",method:"GET",header:{Accept:"application/json"},data:{path:this.path,userId:this.id},success:e=>{if(t("log","at pages/index/index.vue:89",e),uni.hideToast(),200===e.statusCode){this.files=this.formatFileData(e.data);const t={name:"..",type:"文件夹"};this.files.push(t)}else t("error","at pages/index/index.vue:100","获取文件列表失败：",e.statusCode)},fail:e=>{e.errMsg.includes("request:fail")?t("log","at pages/index/index.vue:106","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/index/index.vue:109","请求失败，错误信息：",e.errMsg)}})):uni.showActionSheet({itemList:["删除","分享","下载","AI操作"],success:o=>{if(0===o.tapIndex)t("log","at pages/index/index.vue:119","用户点击了删除按钮"),uni.request({url:this.urls+"/file/delete?filePath="+this.path+"&userId="+this.id,method:"DELETE",header:{},data:{filePath:this.path,userId:this.id},success:e=>{t("log","at pages/index/index.vue:134",e),uni.hideLoading(),200===e.statusCode?(uni.showToast({title:"删除成功",icon:"success"}),this.loadFileList()):uni.showToast({title:`删除失败: ${e.data.message||"未知错误"}`,icon:"none"})},fail:e=>{e.errMsg.includes("request:fail")?t("log","at pages/index/index.vue:154","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/index/index.vue:157","请求失败，错误信息：",e.errMsg)}});else if(1===o.tapIndex)t("log","at pages/index/index.vue:164","aaaa",e),this.showQRCodeModal();else if(2===o.tapIndex)t("log","at pages/index/index.vue:169","test下载"),uni.request({url:this.urls+"/source/preview",method:"GET",header:{},data:{filePath:this.path,userId:getApp().globalData.userInfo.id},success:e=>{uni.hideToast(),t("log","at pages/index/index.vue:185",e),plus.runtime.openURL(e.data.url,(e=>{e?(t("error","at pages/index/index.vue:189","打开链接失败:",e.message),uni.showToast({title:"无法打开链接，请检查网络或手动复制到浏览器",icon:"none"})):t("log","at pages/index/index.vue:195","链接已成功打开")}))},fail:e=>{t("log","at pages/index/index.vue:200",e),e.errMsg.includes("request:fail")?t("log","at pages/index/index.vue:203","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/index/index.vue:206","请求失败，错误信息：",e.errMsg)}});else if(3===o.tapIndex){t("log","at pages/index/index.vue:212","testAI"),t("log","at pages/index/index.vue:213",e.fileType);let o="",a="";["jpg","jpeg","png","gif","bmp","webp","svg"].includes(e.fileType)?uni.showActionSheet({itemList:["ocr","SR","subtitles"],success:t=>{0===t.tapIndex?(a="ocr",o=`检测到文件类型 (${e.fileType})，将进行${a}操作`,this.AIModal(a,o)):1===t.tapIndex?(a="SR",o=`检测到文件类型 (${e.fileType})，将进行${a}操作`,this.AIModal(a,o)):2===t.tapIndex&&(a="subtitles",o=`检测到文件类型 (${e.fileType})，将进行${a}操作`,this.AIModal(a,o))},fail:e=>{t("error","at pages/index/index.vue:239","显示操作菜单失败:",e)}}):"md"===e.fileType?(a="mind",o=`检测到文件类型 (${e.fileType})，将进行${a}操作`,this.AIModal(a,o)):"docx"===e.fileType?(a="Topdf",o=`检测到文件类型 (${e.fileType})，将进行${a}操作`,this.AIModal(a,o)):uni.showToast({title:"不支持该文件类型",icon:"error"})}},fail:e=>{t("error","at pages/index/index.vue:267","显示操作菜单失败:",e)}})}.bind(this)),uni.showToast({title:"加载中...",icon:"loading",duration:3e4,mask:!0}),uni.request({url:this.urls+"/file/list",method:"GET",header:{Accept:"application/json"},data:{path:this.path,userId:this.id},success:e=>{if(t("log","at pages/index/index.vue:293",e),uni.hideToast(),200===e.statusCode){this.files=this.formatFileData(e.data);const t={name:"..",type:"文件夹"};this.files.push(t)}else t("error","at pages/index/index.vue:305","获取文件列表失败：",e.statusCode)},fail:e=>{e.errMsg.includes("request:fail")?t("log","at pages/index/index.vue:311","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/index/index.vue:314","请求失败，错误信息：",e.errMsg)}})},methods:{AIModal(e,o){uni.showModal({title:"确认操作",content:o,confirmText:"确认",cancelText:"取消",success:o=>{o.confirm?(t("log","at pages/index/index.vue:328","用户点击确认"),uni.request({url:this.urls+"/extends/"+e+"?filePath="+this.path+"&userId="+this.id,method:"POST",header:{},data:{filePath:this.path,userId:this.id},success:e=>{uni.hideToast(),t("log","at pages/index/index.vue:345",e),uni.showModal({showCancel:!1,content:e.data.result})},fail:e=>{t("log","at pages/index/index.vue:353",e),e.errMsg.includes("request:fail")?t("log","at pages/index/index.vue:356","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/index/index.vue:359","请求失败，错误信息：",e.errMsg)}})):o.cancel&&t("log","at pages/index/index.vue:365","用户点击取消")}})},async showQRCodeModal(){uni.showToast({title:"加载中...",icon:"loading",duration:3e4,mask:!0}),uni.request({url:this.urls+"/file/share",method:"GET",header:{Accept:"application/json"},data:{path:this.path,userId:getApp().globalData.userInfo.id},success:e=>{uni.hideToast(),t("log","at pages/index/index.vue:391",e),200===e.statusCode?(this.qrTip=e.data.url,this.qrcodeUrl=`data:image/png;base64,${e.data.qrcode}`,this.isModalShow=!0):uni.showToast({title:"获取二维码失败",icon:"none"})},fail:e=>{t("error","at pages/index/index.vue:407","请求失败:",error),uni.showToast({title:"网络错误",icon:"none"})}})},handleModalClose(){this.isModalShow=!1},search(e){uni.showToast({title:"加载中...",icon:"loading",duration:3e4,mask:!0}),uni.request({url:this.urls+"/file/search",method:"GET",header:{Accept:"application/json"},data:{keyword:e.value,userId:getApp().globalData.userInfo.id},success:e=>{uni.hideToast(),200===e.statusCode?this.files=this.formatFileData(e.data):t("error","at pages/index/index.vue:445","获取文件列表失败：",e.statusCode),t("log","at pages/index/index.vue:447",this.files)},fail:e=>{e.errMsg.includes("request:fail")?t("log","at pages/index/index.vue:452","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/index/index.vue:455","请求失败，错误信息：",e.errMsg)}})},blur(e){uni.showToast({title:"blur事件，输入值为："+e.value,icon:"none"})},focus(e){uni.showToast({title:"focus事件，输出值为："+e.value,icon:"none"})},change(e){t("log","at pages/index/index.vue:473","e:",e)},formatFileData:e=>e.map((e=>({name:e.name,date:e.uploadTime?new Date(e.uploadTime).toISOString().replace("T"," ").replace(/\:\d+\.\d+Z/,""):(new Date).toISOString().replace("T"," ").replace(/\:\d+\.\d+Z/,""),size:"directory"===e.type?"-":e.size?`${(e.size/1024).toFixed(2)}KB`:"0B",type:"directory"===e.type?"文件夹":"文件",selected:!1,trueSize:e.size,fileType:e.file_type,tag:e.tag||""})))},components:{myNavagationBar:V,mySearchInput:_,QRcodeModel:N,cloudFileList:T}},[["render",function(t,a,s,i,l,n){const c=e.resolveComponent("myNavagationBar"),r=o(e.resolveDynamicComponent("uni-search-bar"),b),d=e.resolveComponent("cloudFileList"),u=e.resolveComponent("QRcodeModel");return e.openBlock(),e.createElementBlock("view",{class:"content"},[e.createVNode(c),e.createVNode(r,{class:"searchbar",onConfirm:n.search,focus:!1,onBlur:n.blur,onFocus:n.focus,placeholder:l.path},null,8,["onConfirm","onBlur","onFocus","placeholder"]),e.createVNode(d,{files:l.files,style:{"margin-bottom":"12rpx"}},null,8,["files"]),e.createElementVNode("view",null,[e.createVNode(u,{isShow:l.isModalShow,qrcodeUrl:l.qrcodeUrl,tipText:l.qrTip,onClose:n.handleModalClose},null,8,["isShow","qrcodeUrl","tipText","onClose"])])])}]]);var C,k,S;const D=s({name:"ss-upload",props:{isUploadServer:{type:Boolean,default:!1},uploadOptions:{type:Object,default:()=>({url:"",type:"post",name:"file",header:{},formData:{}})},webviewStyle:{type:Object,default:()=>({height:"50px",width:"130px",position:"static",background:"transparent",top:"50px",left:"24px"})},fileInput:{type:Object,default:()=>({fileStyle:{borderRadius:"10px",backgroundColor:"#1975F7",color:"#fff",fontSize:"20px"},fileTitle:"上传附件"})},width:{type:String,default:"130px"},height:{type:String,default:"70px"}},data:()=>({isShow:!1}),updated(){t("log","at uni_modules/ss-upload/components/ss-upload/ss-upload.vue:84",123),this.show()},mounted(){let e=this;e.show(),plus.globalEvent.addEventListener("plusMessage",(function(o){t("log","at uni_modules/ss-upload/components/ss-upload/ss-upload.vue:93",o.data.args.data.arg);let a=o.data.args.data.arg;if(a&&a.filePath){let t=a.filePath;e.$emit("getFile",t)}if(a&&a.files){let t=[JSON.parse(a.files)];e.$emit("uploadSuccess",t)}}))},methods:{show(){let e=this;e.isShow=!0;var o=getCurrentPages(),a=o[o.length-1];k=a.$getAppWebview(),e.getDomStyles((o=>{t("log","at uni_modules/ss-upload/components/ss-upload/ss-upload.vue:117",666895,o),S=plus.webview.create("/uni_modules/ss-upload/hybrid/html/file.html","",{...o,position:"static",background:"transparent"}),k.append(S),setTimeout((()=>{(C=k.children()[0]).evalJS(`passInfo(${JSON.stringify(e.uploadOptions)})`)}),500)}))},hide(){S.close()},getDomStyles(e){uni.createSelectorQuery().in(this).select(".fileBox").fields({size:!0,rect:!0},(({height:t,width:o,top:a,left:s,right:i,bottom:l})=>{uni.createSelectorQuery().selectViewport().scrollOffset((({scrollTop:i})=>e({top:parseInt(a)+parseInt(i)+"px",left:parseInt(s)+"px",width:parseInt(o)+"px",height:parseInt(t)+"px"}))).exec()})).exec()},uploadFile(){},async getUpload(e){let o=this,a=await Promise.all(e.map((e=>(t("log","at uni_modules/ss-upload/components/ss-upload/ss-upload.vue:226","item",e),new Promise(((t,a)=>{uni.uploadFile({url:o.uploadOptions.url,filePath:e.path?e.path:e,name:o.uploadOptions.name,header:o.uploadOptions.header,formData:o.uploadOptions.formData,complete:e=>{let o=JSON.parse(e.data);t(o)}})}))))));t("log","at uni_modules/ss-upload/components/ss-upload/ss-upload.vue:245","服务器返回结果",a),this.$emit("uploadSuccess",a)}},watch:{uploadOptions:{deep:!0,handler:function(e){this.isUploadServer&&setTimeout((()=>{C.evalJS(`passInfo(${JSON.stringify(e)})`)}),2e3)}}}},[["render",function(t,o,a,s,i,l){return e.openBlock(),e.createElementBlock("view",{class:"box"},[e.createElementVNode("view",{class:"fileBox",style:e.normalizeStyle({width:a.width,height:a.height})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)])}],["__scopeId","data-v-b5ae4782"]]);const B=s({data:()=>({show:1,path:"",tag:"",message:"",fileLists:null,files:[],filesApp:"",isUploadServer:!0,uploadOptions:{url:"https://6c15e199.r21.cpolar.top/file/upload",type:"post",name:"file",header:{Accept:"application/json"},formData:{userId:getApp().globalData.userInfo.id}},webviewStyle:{height:"50px",width:"130px",position:"static",background:"transparent",top:"50px",left:"24px"},fileInput:{fileStyle:{borderRadius:"10px",backgroundColor:"#1975F7",color:"#fff",fontSize:"20px"},fileTitle:"上传附件"},result:""}),components:{upload:s({props:{path:{type:String,default:"1"},tag:{type:String,default:"aaaaa"}},data(){return{localPath:this.path,localTag:this.tag,aiTip:"",show1:!0,show2:!1,urls:getApp().globalData.url}},watch:{path(e,t){this.localPath=e},tag(e,t){this.localTag=e}},methods:{changePath(e){this.localPath=e},changeTag(e){this.localTag=e},Accept(){uni.showToast({title:"加载中...",icon:"loading",duration:3e4,mask:!0}),uni.request({url:this.urls+"/file/check",method:"POST",header:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},data:{userId:getApp().globalData.userInfo.id,tag:this.tag,path:this.localPath},success:e=>{t("log","at components/upload.vue:102",this.localPath),t("log","at components/upload.vue:104",this.localTag),uni.hideToast(),t("log","at components/upload.vue:106","1",e),t("log","at components/upload.vue:107","2",e.data),t("log","at components/upload.vue:108","3",e.data.suggest);const o=e.data.suggest;uni.showToast({icon:"success"}),t("log","at components/upload.vue:113",o),o?(this.aiTip=o,t("log","at components/upload.vue:116","4",o),this.show1=!1,this.show2=!0):uni.$emit("uploadend")},fail:e=>{e.errMsg.includes("request:fail")?this.message=e.errMsg+" "+e.statusCode:this.message=`连接失败，错误信息：${e.errMsg}`}})},suggetResult(e){uni.showToast({title:"加载中...",icon:"loading",duration:3e4,mask:!0}),uni.request({url:this.urls+"/file/suggest",method:"GET",header:{Accept:"application/json"},data:{accept:e,userId:getApp().globalData.userInfo.id,filePath:this.localPath},success:e=>{uni.hideToast(),uni.showToast({icon:"success"}),t("log","at components/upload.vue:158",e),t("log","at components/upload.vue:159",e.data),this.showResult(e)},fail:e=>{e.errMsg.includes("request:fail")?this.message=e.errMsg+" "+e.statusCode:this.message=`连接失败，错误信息：${e.errMsg}`}})},showResult(e){uni.showModal({title:"结果",content:"结果已保存至该图片相同目录",confirmText:"复制",cancelText:"关闭",success:o=>{if(uni.$emit("uploadend"),this.show2=!1,this.show1=!0,o.confirm){const o=e.data.result;t("log","at components/upload.vue:184","复制的文本:",o),uni.setClipboardData({data:o,success:()=>{uni.showToast({title:"复制成功",icon:"success"})},fail:e=>{t("error","at components/upload.vue:195","复制失败:",e),uni.showToast({title:"复制失败",icon:"none"})}})}else o.cancel&&t("log","at components/upload.vue:204","用户选择分享")}})}}},[["render",function(t,a,s,l,n,c){const r=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"login-container"},[e.createElementVNode("view",{class:"login-box"},[e.createElementVNode("view",{class:"login-textbox"},[e.withDirectives(e.createElementVNode("text",{class:"login-title"},"上传信息确认",512),[[e.vShow,n.show1]])]),e.withDirectives(e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"map",size:"60rpx",color:"#6966AD",class:"input-icon"}),e.withDirectives(e.createElementVNode("input",{class:"login-input",placeholder:"请输入路径","onUpdate:modelValue":a[0]||(a[0]=e=>n.localPath=e),onInput:a[1]||(a[1]=e=>c.changePath())},null,544),[[e.vModelText,n.localPath]])]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"info",size:"60rpx",color:"#6966AD",class:"input-icon"}),e.withDirectives(e.createElementVNode("input",{class:"login-input","onUpdate:modelValue":a[2]||(a[2]=e=>n.localTag=e),onInput:a[3]||(a[3]=e=>c.changeTag())},null,544),[[e.vModelText,n.localTag]])]),e.createElementVNode("button",{class:"login-button",onClick:a[4]||(a[4]=e=>c.Accept())}," 确认 ")],512),[[e.vShow,n.show1]]),e.withDirectives(e.createElementVNode("view",{class:"ai-suggestion-section"},[e.createElementVNode("text",{class:"ai-title"},"AI建议"),e.createElementVNode("text",{class:"ai-description"},e.toDisplayString(n.aiTip),1),e.createElementVNode("view",{class:"ai-buttons-group"},[e.createElementVNode("button",{class:"ai-button reject",onClick:a[5]||(a[5]=e=>c.suggetResult(!1))}," 拒绝 "),e.createElementVNode("button",{class:"ai-button accept",onClick:a[6]||(a[6]=e=>c.suggetResult(!0))}," 接受 ")])],512),[[e.vShow,n.show2]])])])}],["__scopeId","data-v-c0177445"]])},created(){uni.$on("uploadend",function(e){this.show=1}.bind(this))},methods:{scrolltolower(){t("log","at pages/local/local.vue:77",145623),this.$refs.ssUpload.hide(),setTimeout((()=>{this.$refs.ssUpload.show()}))},uploadFile(){t("log","at pages/local/local.vue:84",getApp().globalData.userInfo.id),uni.showToast({title:"加载中...",icon:"loading",duration:3e4,mask:!0})},getFile(e){t("log","at pages/local/local.vue:100","结果结果结果",e),this.filesApp=e},uploadSuccess(e){uni.hideToast(),t("log","at pages/local/local.vue:110","上传服务器后端返回结果",e),this.result=JSON.stringify(e);const o=e[0];this.show=-1,this.path=o.filePath,this.tag=o.tag||"工作",t("log","at pages/local/local.vue:116",this.path),t("log","at pages/local/local.vue:117",this.tag)}}},[["render",function(t,a,s,i,l,n){const c=e.resolveComponent("upload"),r=o(e.resolveDynamicComponent("ss-upload"),D);return e.openBlock(),e.createElementBlock("view",{class:"content"},[e.createVNode(c,{path:l.path,tag:l.tag},null,8,["path","tag"]),e.createVNode(r,{ref:"ssUpload",width:"260rpx",height:"100rpx",onGetFile:n.getFile,onUploadSuccess:n.uploadSuccess,uploadOptions:l.uploadOptions,isUploadServer:l.isUploadServer,webviewStyle:l.webviewStyle,fileInput:l.fileInput},{default:e.withCtx((()=>[e.createElementVNode("image",{class:"background-image",src:"/static/7_E}6DMMKB]MN90($703355_tmb.png",mode:"heightFix",onClick:a[0]||(a[0]=(...e)=>n.uploadFile&&n.uploadFile(...e)),style:e.normalizeStyle({zIndex:l.show})},null,4)])),_:1},8,["onGetFile","onUploadSuccess","uploadOptions","isUploadServer","webviewStyle","fileInput"])])}]]),M="/static/register2.png";const I=s({data:()=>({urls:getApp().globalData.url,phone:"",email:"",verificationCode:"",password:"",confirmPassword:""}),methods:{getVerificationCode(){this.email?(uni.request({url:this.urls+"/verification/sendRegisterVerificationCode",method:"POST",header:{"Content-Type":"application/json"},data:{email:this.email},success:e=>{uni.hideToast(),t("log","at pages/Register/Register.vue:79",e),200===e.statusCode?uni.showToast({title:"验证码发送成功",icon:"success"}):uni.showToast({title:e.data.message||"发送失败",icon:"none"})},fail:e=>{t("error","at pages/Register/Register.vue:94","请求失败:",e),uni.showToast({title:"网络请求失败",icon:"none"})}}),uni.showToast({title:"验证码已发送至邮箱",icon:"success"})):uni.showToast({title:"请输入邮箱",icon:"none"})},handleRegister(){/^1[3-9]\d{9}$/.test(this.phone)?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?this.verificationCode?this.password===this.confirmPassword?/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{10,}$/.test(this.password)?uni.request({url:this.urls+"/auth/register",method:"POST",header:{"Content-Type":"application/json"},data:{username:"无名",verificationCode:this.verificationCode,passwordHash:this.password,email:this.email,telephone:this.phone},success:e=>{uni.hideToast(),t("log","at pages/Register/Register.vue:164","注册响应:",e),200===e.statusCode?uni.showToast({title:"注册成功",icon:"success"}):(t("log","at pages/Register/Register.vue:176",e),uni.showToast({title:e.data.message||"注册失败",icon:"none"}))},fail:e=>{t("error","at pages/Register/Register.vue:184","请求失败:",e),uni.showToast({title:"网络请求失败",icon:"none"})}}):uni.showToast({title:"密码必须包含字母和数字，且长度大于10位",icon:"none"}):uni.showToast({title:"两次输入的密码不一致",icon:"none"}):uni.showToast({title:"请输入验证码",icon:"none"}):uni.showToast({title:"请输入正确的邮箱",icon:"none"}):uni.showToast({title:"请输入正确的手机号",icon:"none"})}}},[["render",function(t,a,s,l,n,c){const r=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"content"},[e.createElementVNode("image",{class:"background-image",src:M,mode:"scaleToFill"}),e.createElementVNode("view",{class:"login-container"},[e.createElementVNode("view",{class:"login-title"},"注册"),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"phone",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.phone=e),class:"login-input",placeholder:"请输入你的手机号"},null,512),[[e.vModelText,n.phone]])]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"email",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.email=e),class:"login-input",placeholder:"请输入你的邮箱"},null,512),[[e.vModelText,n.email]])]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"auth",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.verificationCode=e),class:"Verification-input",placeholder:"请输入验证码"},null,512),[[e.vModelText,n.verificationCode]]),e.createElementVNode("button",{class:"Verification-button",onClick:a[3]||(a[3]=(...e)=>c.getVerificationCode&&c.getVerificationCode(...e))},"获取")]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"locked",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.password=e),type:"password",class:"login-input",placeholder:"请输入密码"},null,512),[[e.vModelText,n.password]])]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"locked-filled",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>n.confirmPassword=e),type:"password",class:"login-input",placeholder:"再次输入以确认密码"},null,512),[[e.vModelText,n.confirmPassword]])]),e.createElementVNode("view",{class:"to-login"},[e.createElementVNode("text",{class:"rn-text"},"已有账号？"),e.createElementVNode("text",{class:"r-text"}," 点此登录")]),e.createElementVNode("button",{class:"login-button",onClick:a[6]||(a[6]=(...e)=>c.handleRegister&&c.handleRegister(...e))},"注册")])])}]]);const A=s({data:()=>({remeberOrNot:!1,account:"",password:""}),methods:{goApLogin(){uni.navigateTo({url:"/pages/Login/apLogin"})},goRegister(){uni.navigateTo({url:"/pages/Register/Register"})},async getVerification(){const e=this.account.trim();if(!e)return void uni.showToast({title:"请输入邮箱",icon:"none"});if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))try{const t=await uni.request({url:"https://1e2c207f.r21.cpolar.top/verification/send",method:"POST",data:{email:e},header:{"Content-Type":"application/x-www-form-urlencoded"}});"验证码发送成功。"===t.data?uni.showToast({title:"验证码已发送",icon:"success"}):uni.showToast({title:t.data,icon:"none"})}catch(o){uni.showToast({title:"发送失败，请重试",icon:"none"}),t("error","at pages/Login/vcLogin.vue:103","发送验证码错误:",o)}else uni.showToast({title:"请输入有效的邮箱地址",icon:"none"})},async checkVerification(){const e=this.account.trim(),o=this.password.trim();if(e&&o)try{const t=await uni.request({url:"https://1e2c207f.r21.cpolar.top/verification/verify",method:"POST",data:{email:e,code:o},header:{"Content-Type":"application/x-www-form-urlencoded"}});"验证码验证成功。"===t.data?(uni.showToast({title:"登录成功",icon:"success"}),uni.setStorageSync("isLoggedIn",!0),uni.reLaunch({url:"/pages/index/index"})):uni.showToast({title:t.data,icon:"none"})}catch(a){uni.showToast({title:"验证失败，请重试",icon:"none"}),t("error","at pages/Login/vcLogin.vue:154","验证码验证错误:",a)}else uni.showToast({title:"请输入邮箱和验证码",icon:"none"})}}},[["render",function(t,a,s,n,c,r){const d=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"login-container"},[e.createElementVNode("image",{class:"background-image",src:l,mode:"heightFix"}),e.createElementVNode("view",{class:"login-box"},[e.createElementVNode("view",{class:"login-textbox"},[e.createElementVNode("text",{class:"login-title"},"登录"),e.createElementVNode("text",{class:"y-text",onClick:a[0]||(a[0]=e=>r.goApLogin())},"账号密码登录")]),e.createElementVNode("view",{class:"input-groups"},[e.createElementVNode("view",{class:"input-group"},[e.createVNode(d,{type:"person",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{class:"login-input","onUpdate:modelValue":a[1]||(a[1]=e=>c.account=e),placeholder:"手机号/邮箱"},null,512),[[e.vModelText,c.account]])]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(d,{type:"locked",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{class:"login-input","onUpdate:modelValue":a[2]||(a[2]=e=>c.password=e),placeholder:"验证码"},null,512),[[e.vModelText,c.password]]),e.createElementVNode("button",{class:"Verification-button",onClick:a[3]||(a[3]=e=>r.getVerification())},"获取")]),e.createElementVNode("button",{class:"login-button",onClick:a[4]||(a[4]=e=>r.checkVerification())},"登录"),e.createElementVNode("view",{class:"to-register"},[e.createElementVNode("text",{class:"rn-text"},"没有账号？"),e.createElementVNode("text",{class:"r-text",onClick:a[5]||(a[5]=e=>r.goRegister())}," 点此注册")])])])])}]]);const L=s({data:()=>({id:getApp().globalData.userInfo.id}),methods:{goHistory(){uni.navigateTo({url:"/pages/ShareHistory/ShareHistory"})},goChangePass(){uni.navigateTo({url:"/pages/ChangePass/ChangePass"})},goAboutUs(){uni.navigateTo({url:"/pages/AboutUs/AboutUs"})},goTagLibarily(){uni.navigateTo({url:"/pages/taglibarily/taglibarily"})},logout(){t("log","at pages/My/My.vue:79","Logout button tapped"),uni.showModal({title:"提示",content:"确定要退出登录吗？",success:function(e){if(e.confirm){t("log","at pages/My/My.vue:85","用户点击确定"),uni.showToast({title:"已退出登录",icon:"none"});getApp().globalData.userInfo={id:-1},uni.reLaunch({url:"/pages/Login/apLogin"})}else e.cancel&&t("log","at pages/My/My.vue:95","用户点击取消")}})}}},[["render",function(t,a,s,l,n,c){const r=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"page-container"},[e.createElementVNode("view",{class:"header-purple-block"},[e.createElementVNode("text",{class:"header-title-main"},"About myself"),e.createElementVNode("view",{class:"user-info-centered"},[e.createElementVNode("text",{class:"username"},"木 屋"),e.createElementVNode("text",{class:"user-id"},"用户id: "+e.toDisplayString(n.id),1)])]),e.createElementVNode("view",{class:"content-area"},[e.createElementVNode("view",{class:"content-card"},[e.createElementVNode("view",{class:"list-item",onClick:a[0]||(a[0]=(...e)=>c.goHistory&&c.goHistory(...e))},[e.createElementVNode("text",{class:"item-text"},"分享记录"),e.createVNode(r,{type:"right",size:"18",color:"#BDBDBD"})]),e.createElementVNode("view",{class:"list-item",onClick:a[1]||(a[1]=(...e)=>c.goChangePass&&c.goChangePass(...e))},[e.createElementVNode("text",{class:"item-text"},"修改个人信息"),e.createVNode(r,{type:"right",size:"18",color:"#BDBDBD"})]),e.createElementVNode("view",{class:"list-item",onClick:a[2]||(a[2]=(...e)=>c.goAboutUs&&c.goAboutUs(...e))},[e.createElementVNode("text",{class:"item-text"},"关于我们"),e.createVNode(r,{type:"right",size:"18",color:"#BDBDBD"})]),e.createElementVNode("view",{class:"list-item",onClick:a[3]||(a[3]=(...e)=>c.goTagLibarily&&c.goTagLibarily(...e))},[e.createElementVNode("text",{class:"item-text"},"分类管理"),e.createVNode(r,{type:"right",size:"18",color:"#BDBDBD"})]),e.createElementVNode("button",{class:"logout-button",onClick:a[4]||(a[4]=(...e)=>c.logout&&c.logout(...e))},"退出登录")])])])}]]);const z=s({data:()=>({phone:"",email:"",verificationCode:"",password:"",confirmPassword:""}),methods:{getVerificationCode(){this.email?uni.showToast({title:"验证码已发送至邮箱",icon:"success"}):uni.showToast({title:"请输入邮箱",icon:"none"})},handleRegister(){/^1[3-9]\d{9}$/.test(this.phone)?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?this.verificationCode?this.password===this.confirmPassword?/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{10,}$/.test(this.password)?(uni.showToast({title:"注册成功",icon:"success"}),this.phone="",this.email="",this.verificationCode="",this.password="",this.confirmPassword=""):uni.showToast({title:"密码必须包含字母和数字，且长度大于10位",icon:"none"}):uni.showToast({title:"两次输入的密码不一致",icon:"none"}):uni.showToast({title:"请输入验证码",icon:"none"}):uni.showToast({title:"请输入正确的邮箱",icon:"none"}):uni.showToast({title:"请输入正确的手机号",icon:"none"})}}},[["render",function(t,a,s,l,n,c){const r=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"content"},[e.createElementVNode("image",{class:"background-image",src:M,mode:"scaleToFill"}),e.createElementVNode("view",{class:"login-container"},[e.createElementVNode("view",{class:"login-title"},"修改密码"),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"email",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.email=e),class:"login-input",placeholder:"请输入你注册的邮箱"},null,512),[[e.vModelText,n.email]])]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"auth",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.verificationCode=e),class:"Verification-input",placeholder:"请输入验证码"},null,512),[[e.vModelText,n.verificationCode]]),e.createElementVNode("button",{class:"Verification-button",onClick:a[2]||(a[2]=(...e)=>c.getVerificationCode&&c.getVerificationCode(...e))},"获取")]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"locked",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.password=e),type:"password",class:"login-input",placeholder:"请输入新密码"},null,512),[[e.vModelText,n.password]])]),e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"locked-filled",size:"60rpx",color:"#6966AD"}),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.confirmPassword=e),type:"password",class:"login-input",placeholder:"再次输入以确认密码"},null,512),[[e.vModelText,n.confirmPassword]])]),e.createElementVNode("button",{class:"login-button",onClick:a[5]||(a[5]=(...e)=>c.handleRegister&&c.handleRegister(...e))},"确认")])])}]]);const U=s({data:()=>({files:[],id:getApp().globalData.userInfo.id,urls:getApp().globalData.url,isModalShow:!1,qrcodeUrl:"",qrTip:"扫描二维码登录"}),created(){uni.$on("shareTap",function(e){t("log","at pages/ShareHistory/ShareHistory.vue:34","test",JSON.stringify(e,null,2)),this.showQRCodeModal(e)}.bind(this)),uni.request({url:this.urls+"/file/shares?userId="+this.id,method:"GET",header:{},data:{userId:this.id},success:e=>{t("log","at pages/ShareHistory/ShareHistory.vue:50",e),uni.hideToast(),200===e.statusCode?this.files=this.formatFileData(e.data):t("error","at pages/ShareHistory/ShareHistory.vue:56","获取文件列表失败：",e.statusCode),t("log","at pages/ShareHistory/ShareHistory.vue:58",this.files)},fail:e=>{e.errMsg.includes("request:fail")?t("log","at pages/ShareHistory/ShareHistory.vue:63","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/ShareHistory/ShareHistory.vue:66","请求失败，错误信息：",e.errMsg)}})},methods:{formatFileData:e=>e.map((e=>({name:e.fileName,date:e.createdAt?new Date(e.createdAt).toISOString().replace("T"," ").replace(/\:\d+\.\d+Z/,""):(new Date).toISOString().replace("T"," ").replace(/\:\d+\.\d+Z/,""),size:"",type:"directory"===e.type?"文件夹":"文件",selected:!1,tag:e.tag||"",qrCode:e.qrCode}))),handleModalClose(){this.isModalShow=!1},showQRCodeModal(e){uni.showToast({title:"加载中...",icon:"loading",duration:3e4,mask:!0}),uni.request({url:this.urls+"/qr/get?userId="+getApp().globalData.userInfo.id+"&qrPath="+e.qrCode,method:"GET",header:{},data:{userId:getApp().globalData.userInfo.id,qrPath:e.qrCode},success:e=>{uni.hideToast(),t("log","at pages/ShareHistory/ShareHistory.vue:115",e),200===e.statusCode?(this.qrTip=e.data.url,this.qrcodeUrl=`data:image/png;base64,${e.data.qrcode}`,this.isModalShow=!0):uni.showToast({title:"获取二维码失败",icon:"none"})},fail:e=>{t("error","at pages/ShareHistory/ShareHistory.vue:131","请求失败:",error),uni.showToast({title:"网络错误",icon:"none"})}})}},components:{mySearchInput:_,historyListUvue:s({props:{files:{type:Array,default:()=>[]}},data:()=>({}),methods:{selected(e){uni.$emit("shareTap",e)}},components:{historyListItem:s({props:["file"]},[["render",function(t,a,s,l,n,c){const r=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"file-item"},[e.createElementVNode("view",{class:"file-icon"},[e.createVNode(r,{type:"folder-add",size:"30"})]),e.createElementVNode("view",{class:"file-divider"}),e.createElementVNode("view",{class:"file-info"},[e.createElementVNode("view",{class:"file-nametag"},[e.createElementVNode("text",{class:"file-name"},e.toDisplayString(s.file.name),1)]),e.createElementVNode("view",{class:"file-datesize"},[e.createElementVNode("text",{class:"file-date"},e.toDisplayString(s.file.date),1),e.createElementVNode("text",{class:"file-size"},e.toDisplayString(s.file.size),1)])])])}],["__scopeId","data-v-ec116d8f"]])}},[["render",function(t,o,a,s,i,l){const n=e.resolveComponent("historyListItem");return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"file-list-container"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"file-scroll-view"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.files,((a,s)=>(e.openBlock(),e.createElementBlock("view",{key:s},[e.createElementVNode("view",{class:e.normalizeClass({"file-item-container":a.selected&&t.isBatchModes}),onClick:e=>l.selected(a),onLongpress:o[0]||(o[0]=()=>{})},[e.createVNode(n,{class:"file-item",file:a},null,8,["file"])],42,["onClick"])])))),128))])])])}],["__scopeId","data-v-b512ed66"]]),QRcodeModel:N}},[["render",function(t,o,a,s,i,l){const n=e.resolveComponent("historyListUvue"),c=e.resolveComponent("QRcodeModel");return e.openBlock(),e.createElementBlock("scroll-view",{style:{flex:"1"}},[e.createElementVNode("view",{style:{"background-color":"#8D8DC1"}},[e.createVNode(n,{files:i.files},null,8,["files"])]),e.createElementVNode("view",null,[e.createVNode(c,{isShow:i.isModalShow,qrcodeUrl:i.qrcodeUrl,tipText:i.qrTip,onClose:l.handleModalClose},null,8,["isShow","qrcodeUrl","tipText","onClose"])])])}]]);const $=s({onShow(){setTimeout((()=>{this.reload()}),1e3)},data:()=>({files:[],id:getApp().globalData.userInfo.id,urls:getApp().globalData.url}),created(){uni.$on("tagSelected",function(e){uni.showActionSheet({itemList:["删除","修改"],success:o=>{0===o.tapIndex?(t("log","at pages/taglibarily/taglibarily.vue:51","用户点击了删除按钮"),uni.request({url:this.urls+"/tag/delete?userId="+this.id+"&tag="+e.tag+"&type="+e.type,method:"POST",header:{},data:{userId:this.id,tag:e.tag,type:e.name},success:e=>{t("log","at pages/taglibarily/taglibarily.vue:68",e),uni.hideToast(),200===e.statusCode?(uni.showToast({icon:"success"}),this.reload()):t("error","at pages/taglibarily/taglibarily.vue:76","失败3：",e.statusCode),t("log","at pages/taglibarily/taglibarily.vue:78",this.files)},fail:e=>{e.errMsg.includes("request:fail")?t("log","at pages/taglibarily/taglibarily.vue:83","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/taglibarily/taglibarily.vue:86","请求失败，错误信息：",e.errMsg)}})):1===o.tapIndex&&(t("log","at pages/taglibarily/taglibarily.vue:92","aaaa",e),this.goChangeTag(e))},fail:e=>{t("error","at pages/taglibarily/taglibarily.vue:100","显示操作菜单失败:",e)}})}.bind(this)),this.reload()},methods:{reload(){uni.request({url:this.urls+"/tag/get",method:"GET",header:{},data:{userId:this.id},success:e=>{t("log","at pages/taglibarily/taglibarily.vue:122",e),uni.hideToast(),200===e.statusCode?this.files=this.formatFileData(e.data):t("error","at pages/taglibarily/taglibarily.vue:128","获取文件列表失败：",e.statusCode),t("log","at pages/taglibarily/taglibarily.vue:130",this.files)},fail:e=>{e.errMsg.includes("request:fail")?t("log","at pages/taglibarily/taglibarily.vue:135","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/taglibarily/taglibarily.vue:138","请求失败，错误信息：",e.errMsg)}})},goChangeTag(e){const t=JSON.stringify(e),o=encodeURIComponent(t);uni.navigateTo({url:`/pages/taglibarily/tagUpload?oldTag=${o}`})},formatFileData(e){const t=e.FileTag||[],o=e.PhotoTag||[];return[...t.map((e=>({name:"文件",date:"",size:"",type:"文件",selected:!1,tag:e}))),...o.map((e=>({name:"图片",date:"",size:"",type:"图片",selected:!1,tag:e})))]}},components:{tagList:s({props:{files:{type:Array,default:()=>[]}},data:()=>({isBatchModes:!1}),components:{tagListItem:s({props:{file:{type:Object},flagTagColor:{type:String,default:"#333"}},data:()=>({})},[["render",function(t,a,s,l,n,c){const r=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"file-item"},[e.createElementVNode("view",{class:"file-icon"},[e.createVNode(r,{type:"folder-add",size:"30"})]),e.createElementVNode("view",{class:"file-divider"}),e.createElementVNode("view",{class:"file-info"},[e.createElementVNode("view",{class:"file-nametag"},[e.createElementVNode("text",{class:"file-name"},e.toDisplayString(s.file.name),1),e.createElementVNode("view",{class:"file-tag"},e.toDisplayString(s.file.tag?s.file.tag:"文件夹"),1)]),e.createElementVNode("view",{class:"file-datesize"},[e.createElementVNode("text",{class:"file-date"},e.toDisplayString(s.file.date),1),e.createElementVNode("text",{class:"file-size"},e.toDisplayString(s.file.size),1)])])])}],["__scopeId","data-v-365135bf"]])},created(){uni.$on("toggleBatchModes",function(e){if(t("log","at components/tagList.vue:38","监听到事件，携带参数为："+e),!0===this.isBatchModes&&!1===e){const e=this.files.filter((function(e){return e.selected}));for(let o=0;o<e.length;o++)t("log","at components/tagList.vue:47",e[o].name);for(let t=0;t<this.files.length;t++)this.files[t].selected=!1}this.isBatchModes=e}.bind(this))},methods:{goNewTag(){uni.navigateTo({url:"/pages/taglibarily/tagUpload"})},selected(e){if(uni.$emit("tagSelected",e),!0===this.isBatchModes)for(let t=0;t<this.files.length;t++)if(this.files[t].name===e){this.files[t].selected=!this.files[t].selected;break}for(let o=0;o<this.files.length;o++)if(this.files[o].name===e){t("log","at components/tagList.vue:78",this.files[o].name,this.files[o].selected);break}}}},[["render",function(t,o,a,s,i,l){const n=e.resolveComponent("tagListItem");return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"file-list-container"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"file-scroll-view"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.files,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o},[e.createElementVNode("view",{class:e.normalizeClass({"file-item-container":t.selected&&i.isBatchModes}),onClick:e=>l.selected(t)},[e.createVNode(n,{class:"file-item",file:t},null,8,["file"])],10,["onClick"])])))),128)),e.createElementVNode("button",{onClick:o[0]||(o[0]=e=>l.goNewTag())},"新增标签")])])])}],["__scopeId","data-v-6e54ec78"]])}},[["render",function(t,o,a,s,i,l){const n=e.resolveComponent("tagList");return e.openBlock(),e.createElementBlock("view",{class:"content"},[e.createVNode(n,{files:i.files},null,8,["files"])])}]]);const F=s({onLoad(e){if(e.oldTag)try{const o=decodeURIComponent(e.oldTag),a=JSON.parse(o);this.oldTag=a,this.title="修改标签(无法修改标签类型)",t("log","at pages/taglibarily/tagUpload.vue:46","已保存参数到data:",this.oldTag)}catch(o){t("error","at pages/taglibarily/tagUpload.vue:48","参数解析失败:",o),this.oldTag=null}else t("log","at pages/taglibarily/tagUpload.vue:54","未传递oldTag参数，data保持为空")},data:()=>({title:"新建标签",oldTag:null,option:" ",newTagName:"",tagTypes:["文件","图片"],tagType:"文件",id:getApp().globalData.userInfo.id,urls:getApp().globalData.url}),methods:{handleFileChange(e){this.tagType=this.tagTypes[e.detail.value]},addTag(){null===this.oldTag?uni.request({url:this.urls+"/tag/add?userId="+this.id+"&tag="+this.newTagName+"&type="+this.tagType,method:"POST",header:{},data:{userId:this.id,tag:this.newTagName,type:this.tagType},success:e=>{t("log","at pages/taglibarily/tagUpload.vue:87",e),t("log","at pages/taglibarily/tagUpload.vue:88",this.tagType),t("log","at pages/taglibarily/tagUpload.vue:89",this.newTagName),uni.hideToast(),200===e.statusCode?(uni.showToast({icon:"success"}),uni.navigateBack()):t("error","at pages/taglibarily/tagUpload.vue:97","失败1：",e.statusCode)},fail:e=>{e.errMsg.includes("request:fail")?t("log","at pages/taglibarily/tagUpload.vue:103","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/taglibarily/tagUpload.vue:106","请求失败，错误信息：",e.errMsg)}}):(t("log","at pages/taglibarily/tagUpload.vue:112","aaaaaaaaaaaaa",this.oldTag),uni.request({url:this.urls+"/tag/update?userId="+this.id+"&newtag="+this.newTagName+"&type="+this.oldTag.type+"&oldtag="+this.oldTag.tag,method:"POST",header:{},data:{userId:this.id,oldtag:this.oldTag.tag,newtag:this.newTagName,type:this.oldTag.type},success:e=>{t("log","at pages/taglibarily/tagUpload.vue:126",e),t("log","at pages/taglibarily/tagUpload.vue:127",this.tagType),t("log","at pages/taglibarily/tagUpload.vue:128",this.newTagName),uni.hideToast(),200===e.statusCode?(uni.showToast({icon:"success"}),uni.navigateBack()):t("error","at pages/taglibarily/tagUpload.vue:136","失败2：",e.statusCode)},fail:e=>{e.errMsg.includes("request:fail")?t("log","at pages/taglibarily/tagUpload.vue:142","请求失败（网络错误）：",e.errMsg,"状态码：",e.statusCode):t("log","at pages/taglibarily/tagUpload.vue:145","请求失败，错误信息：",e.errMsg)}}))}}},[["render",function(t,a,s,l,n,c){const r=o(e.resolveDynamicComponent("uni-icons"),i);return e.openBlock(),e.createElementBlock("view",{class:"login-container",style:{"background-color":"#8D8DC1"}},[e.createElementVNode("view",{class:"login-box"},[e.createElementVNode("view",{class:"login-textbox"},[e.createElementVNode("text",{class:"login-title"},e.toDisplayString(n.title),1)]),e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("view",{class:"input-group"},[e.createVNode(r,{type:"map",size:"60rpx",color:"#6966AD",class:"input-icon"}),e.withDirectives(e.createElementVNode("input",{class:"login-input",placeholder:"请输入新标签名","onUpdate:modelValue":a[0]||(a[0]=e=>n.newTagName=e)},null,512),[[e.vModelText,n.newTagName]])]),e.createElementVNode("view",{class:"login-button",style:{position:"relative"}},[e.createVNode(r,{color:"#6966AD",class:"input-icon",style:{position:"absolute",left:"20rpx"}},{default:e.withCtx((()=>[e.createTextVNode("标签类型:")])),_:1}),e.createElementVNode("picker",{mode:"selector",range:n.tagTypes,onChange:a[1]||(a[1]=(...e)=>c.handleFileChange&&c.handleFileChange(...e)),class:"nav-item"},e.toDisplayString(n.tagType),41,["range"])]),e.createElementVNode("button",{class:"login-button",onClick:a[2]||(a[2]=(...e)=>c.addTag&&c.addTag(...e))}," 确认 ")])])])}]]);__definePage("pages/Login/apLogin",n),__definePage("pages/index/index",E),__definePage("pages/local/local",B),__definePage("pages/Register/Register",I),__definePage("pages/Login/vcLogin",A),__definePage("pages/My/My",L),__definePage("pages/ChangePass/ChangePass",z),__definePage("pages/ShareHistory/ShareHistory",U),__definePage("pages/taglibarily/taglibarily",$),__definePage("pages/taglibarily/tagUpload",F);const P={globalData:{userInfo:{id:1e5},url:"https://6c15e199.r21.cpolar.top"},onLaunch:function(){t("log","at App.vue:8","App Launch")},onShow:function(){t("log","at App.vue:11","App Show")},onHide:function(){t("log","at App.vue:14","App Hide")}};const{app:q,Vuex:O,Pinia:R}={app:e.createVueApp(P)};uni.Vuex=O,uni.Pinia=R,q.provide("__globalStyles",__uniConfig.styles),q._component.mpType="app",q._component.render=()=>{},q.mount("#app")}(Vue);
